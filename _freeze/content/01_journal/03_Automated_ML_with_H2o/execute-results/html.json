{
  "hash": "1ef7e36d99fb53ab612cc814282304b7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"03 Automated Machine Learning with H20\"\nauthor: \"Rishon Noel Saldanha\"\ndate: \"6/6/2024\"\nparams:\n  data_dir: \"../../data/\"\n---\n\n\n\n\nLoad the absolute path to the data directory.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_dir <- params$data_dir\n```\n:::\n\n\n\n\n# Libraries \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.4     ✔ readr     2.1.5\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.1\n#> ✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n#> ✔ purrr     1.0.2     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(skimr)\nlibrary(GGally)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Registered S3 method overwritten by 'GGally':\n#>   method from   \n#>   +.gg   ggplot2\n```\n\n\n:::\n:::\n\n\n\n\n# Load Data Definitions\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndefinitions_raw_tbl   <- read_excel(file.path(\"C:/Users/risho/OneDrive/Desktop/internship_sparks/ss24-bdml-rishon1234/ML/data/Business Decisions with Machine Learning/data_definitions.xlsx\"), sheet = 1, col_names = FALSE)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> New names:\n#> • `` -> `...1`\n#> • `` -> `...2`\n```\n\n\n:::\n\n```{.r .cell-code}\ndefinitions_raw_tbl |> as_tibble() |> print()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 35 × 2\n#>    ...1                    ...2             \n#>    <chr>                   <chr>            \n#>  1 Education               1 'Below College'\n#>  2 <NA>                    2 'College'      \n#>  3 <NA>                    3 'Bachelor'     \n#>  4 <NA>                    4 'Master'       \n#>  5 <NA>                    5 'Doctor'       \n#>  6 <NA>                    <NA>             \n#>  7 EnvironmentSatisfaction 1 'Low'          \n#>  8 <NA>                    2 'Medium'       \n#>  9 <NA>                    3 'High'         \n#> 10 <NA>                    4 'Very High'    \n#> # ℹ 25 more rows\n```\n\n\n:::\n:::\n\n\n\n\n# Load Employee Attrition\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nemployee_attrition_tbl <- read_csv(\"C:/Users/risho/OneDrive/Desktop/internship_sparks/ss24-bdml-rishon1234/ML/data/Business Decisions with Machine Learning/datasets-1067-1925-WA_Fn-UseC_-HR-Employee-Attrition.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Rows: 1470 Columns: 35\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \",\"\n#> chr  (9): Attrition, BusinessTravel, Department, EducationField, Gender, Job...\n#> dbl (26): Age, DailyRate, DistanceFromHome, Education, EmployeeCount, Employ...\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nemployee_attrition_tbl |> as_tibble() |> print()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 1,470 × 35\n#>      Age Attrition BusinessTravel    DailyRate Department       DistanceFromHome\n#>    <dbl> <chr>     <chr>                 <dbl> <chr>                       <dbl>\n#>  1    41 Yes       Travel_Rarely          1102 Sales                           1\n#>  2    49 No        Travel_Frequently       279 Research & Deve…                8\n#>  3    37 Yes       Travel_Rarely          1373 Research & Deve…                2\n#>  4    33 No        Travel_Frequently      1392 Research & Deve…                3\n#>  5    27 No        Travel_Rarely           591 Research & Deve…                2\n#>  6    32 No        Travel_Frequently      1005 Research & Deve…                2\n#>  7    59 No        Travel_Rarely          1324 Research & Deve…                3\n#>  8    30 No        Travel_Rarely          1358 Research & Deve…               24\n#>  9    38 No        Travel_Frequently       216 Research & Deve…               23\n#> 10    36 No        Travel_Rarely          1299 Research & Deve…               27\n#> # ℹ 1,460 more rows\n#> # ℹ 29 more variables: Education <dbl>, EducationField <chr>,\n#> #   EmployeeCount <dbl>, EmployeeNumber <dbl>, EnvironmentSatisfaction <dbl>,\n#> #   Gender <chr>, HourlyRate <dbl>, JobInvolvement <dbl>, JobLevel <dbl>,\n#> #   JobRole <chr>, JobSatisfaction <dbl>, MaritalStatus <chr>,\n#> #   MonthlyIncome <dbl>, MonthlyRate <dbl>, NumCompaniesWorked <dbl>,\n#> #   Over18 <chr>, OverTime <chr>, PercentSalaryHike <dbl>, …\n```\n\n\n:::\n:::\n\n\n\n\n# Create Visualization Method\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_ggpairs <- function(data, color = NULL, density_alpha = 0.5) {\n    \n    color_expr <- enquo(color)\n    \n    if (rlang::quo_is_null(color_expr)) {\n        \n        g <- data %>%\n            ggpairs(lower = \"blank\") \n        \n    } else {\n        \n        color_name <- quo_name(color_expr)\n        \n        g <- data %>%\n            ggpairs(mapping = aes_string(color = color_name), \n                    lower = \"blank\", legend = 1,\n                    diag = list(continuous = wrap(\"densityDiag\", \n                                                  alpha = density_alpha))) +\n            theme(legend.position = \"bottom\")\n    }\n    \n    return(g)\n    \n}\n```\n:::\n\n\n\n\n# Visualize Feature Groups\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Descriptive Features\nemployee_attrition_tbl %>% \n  select(Attrition, Age, DistanceFromHome, Gender, MaritalStatus, NumCompaniesWorked, Over18) %>%\n  plot_ggpairs(Attrition)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Warning: `aes_string()` was deprecated in ggplot2 3.0.0.\n#> ℹ Please use tidy evaluation idioms with `aes()`.\n#> ℹ See also `vignette(\"ggplot2-in-packages\")` for more information.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](03_Automated_ML_with_H2o_files/figure-html/unnamed-chunk-6-1.png){width=960}\n:::\n\n```{.r .cell-code}\n# Employment Features\nemployee_attrition_tbl %>% \n  select(Attrition, Department, EmployeeCount, EmployeeNumber, JobInvolvement, JobLevel, JobRole, JobSatisfaction) %>%\n  plot_ggpairs(Attrition)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Warning in cor(x, y): the standard deviation is zero\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n#> Warning in cor(x, y): the standard deviation is zero\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](03_Automated_ML_with_H2o_files/figure-html/unnamed-chunk-6-2.png){width=960}\n:::\n\n```{.r .cell-code}\n# Compensation Features\nemployee_attrition_tbl %>% \n  select(Attrition, MonthlyIncome, PercentSalaryHike, StockOptionLevel) %>%\n  plot_ggpairs(Attrition)\n```\n\n::: {.cell-output-display}\n![](03_Automated_ML_with_H2o_files/figure-html/unnamed-chunk-6-3.png){width=960}\n:::\n\n```{.r .cell-code}\n# Survery Results\nemployee_attrition_tbl %>% \n  select(Attrition, EnvironmentSatisfaction, JobSatisfaction, RelationshipSatisfaction, WorkLifeBalance) %>%\n  plot_ggpairs(Attrition)\n```\n\n::: {.cell-output-display}\n![](03_Automated_ML_with_H2o_files/figure-html/unnamed-chunk-6-4.png){width=960}\n:::\n\n```{.r .cell-code}\n# Performance Data\nemployee_attrition_tbl %>% \n  select(Attrition, JobInvolvement, PerformanceRating) %>%\n  plot_ggpairs(Attrition)\n```\n\n::: {.cell-output-display}\n![](03_Automated_ML_with_H2o_files/figure-html/unnamed-chunk-6-5.png){width=960}\n:::\n\n```{.r .cell-code}\n# Work-Life Features\nemployee_attrition_tbl %>% \n  select(Attrition, BusinessTravel, OverTime) %>%\n    plot_ggpairs(Attrition)\n```\n\n::: {.cell-output-display}\n![](03_Automated_ML_with_H2o_files/figure-html/unnamed-chunk-6-6.png){width=960}\n:::\n\n```{.r .cell-code}\n# Training & Education\nemployee_attrition_tbl %>% \n  select(Attrition, Education, EducationField, TrainingTimesLastYear) %>%\n  plot_ggpairs(Attrition)\n```\n\n::: {.cell-output-display}\n![](03_Automated_ML_with_H2o_files/figure-html/unnamed-chunk-6-7.png){width=960}\n:::\n\n```{.r .cell-code}\n# Time-Based Features\nemployee_attrition_tbl %>% \n  select(Attrition, TotalWorkingYears, YearsAtCompany, YearsInCurrentRole, YearsSinceLastPromotion, YearsWithCurrManager) %>%\n    plot_ggpairs(Attrition)\n```\n\n::: {.cell-output-display}\n![](03_Automated_ML_with_H2o_files/figure-html/unnamed-chunk-6-8.png){width=960}\n:::\n:::\n\n\n\n\n\n# Challenge Solutions\nThe challenge question are solved based on the graphs plotted above for the feature groups.\n\n### _1. Compensation Features_\nWhat can you deduce about the interaction between Monthly Income and Attrition? \\\n**Solution:** c. Those that are leaving have a lower Monthly Income.\n\n### _2. Compensation Features_\nWhat can you deduce about the interaction between Percent Salary Hike and Attrition? \\\n**Solution:** c. Those that are leaving have lower Percent Salary Hike \\\n**Note:** However, it must be noted this distinction is not super clear as for both attrition options \"yes\" and \"no\" the mean percent salary hike is the same. Only the max value of the percent salary hike is bigger for \"yes\". That's why I decide for c).\n\n### _3. Compensation Features_\nWhat can you deduce about the interaction between Stock Option Level and Attrition? \\\n**Solution:** b. Those that are staying have a higher stock option level.\n\n### _4. Survey Results_\nWhat can you deduce about the interaction between Environment Satisfaction and Attrition? \\\n**Solution:** A higher proportion of those leaving have a low environment satisfaction level.\n\n### _5. Survey Results_\nWhat can you deduce about the interaction between Work Life Balance and Attrition \\\n**Solution:** b. Those that are staying have a higher density of 2's and 3's.\n\n### _6. Performance Data_\nWhat Can you deduce about the interaction between Job Involvement and Attrition? \\\n**Solution:** a. Those that are leaving have a lower density of 3's and 4's.\n\n### _7. Work-Life Features_\nWhat can you deduce about the interaction between Over Time and Attrition? \\\n**Solution:** b. The proportion of those staying that are working Over Time are high compared to those that are not staying.\n\n### _8. Training and Education_\nWhat can you deduce about the interaction between Training Times Last Year and Attrition \\\n**Solution:** b. People that leave tend to have less annual trainings.\n\n### _9. Time-Based Features_\nWhat can you deduce about the interaction between Years At Company and Attrition \\\n**Solution:** b. People that leave tend to have less working years at the company.\n\n### _10. Time-Based Features_\nWhat can you deduce about the interaction between Years Since Last Promotion and Attrition? \\\n**Solution:** a. Those that are leaving have more years since last promotion than those that are staying.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}